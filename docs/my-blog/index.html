<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>H5 → 小程序通信 Demo</title>
    <!-- 引入微信JS-SDK -->
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>

<body>
    <div>
        <h2>测试数据 (H5 页面)1</h2>
        <button id="sendBtn">送消息给小程序</button>
    </div>
    <script>
        document.addEventListener("WeixinJSBridgeReady", () => {
            console.log("JSBridge ready");
        });
        // 点击按钮调用发送方法
        document.getElementById("sendBtn").addEventListener("click", function () {
            sendMessageToMiniProgram();
        });
        function sendMessageToMiniProgram() {
            if (window.wx && wx.miniProgram) {
                wx.miniProgram.postMessage({
                    data: {
                        latitude: '39.90873966065374', // 目标纬度
                        longitude: '116.3974673500868', // 目标经度
                        name: '测试数据',
                        address: '测试地址', // 目标地址
                        scale: 18, // 地图缩放级别
                    }
                });
                wx.miniProgram.navigateTo('/components/web-view')
                // wx.miniProgram.navigateBack()
            }
        }
    </script>

</body>

</html>
